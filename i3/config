# meta
set $mod Mod4
set $alt Mod1

# use meta+mouse to drag floating windows
floating_modifier $mod

# focus_follows_mouse no

font pango:SauceCodePro Nerd Font Semibold 12

###
# borders & gaps
###

# no borders for any window
for_window [class="^.*"] border pixel 0

# 10 px between containers
gaps inner 10

###
# workspaces
###

set $ws1  "1: i"
set $ws2  "2: ii"
set $ws3  "3: iii"
set $ws4  "4: iv"
set $ws5  "5: v"
set $ws6  "6: vi"
set $ws7  "7: vii"
set $ws8  "8: viii"
set $ws9  "9: ix"
set $ws10 "10: x"

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

###
# autostart
###

# screen locker
exec --no-startup-id xss-lock --transfer-sleep-lock -- ~/.config/i3/scripts/lock.sh

# network applet
exec --no-startup-id nm-applet

# wallpaper
exec --no-startup-id nitrogen --set-tiled ~/wallpaper.png --save

exec --no-startup-id nextcloud --background

# bar
exec_always --no-startup-id ~/.config/i3/scripts/bar.sh

# compositor
exec_always --no-startup-id picom

# notifications
exec --no-startup-id dunst

exec --no-startup-id kdeconnect-indicator


###
# bindings
###

# terminal
bindsym $mod+Return exec alacritty

# close focused window
bindsym $mod+q kill

# menu
bindsym $mod+d exec rofi -show combi

# move between windows
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move windows
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# fullscreen active window
bindsym $mod+f fullscreen toggle

# next window is split vertically/horizontally
bindsym $mod+semicolon split h
bindsym $mod+apostrophe split v

# toggle from floating to tiling
bindsym $mod+Shift+space floating toggle

# lock screen
bindsym $mod+w exec loginctl lock-session

# volume
bindsym XF86AudioRaiseVolume exec "pactl set-sink-volume 0 +5%"
bindsym XF86AudioLowerVolume exec "pactl set-sink-volume 0 -5%"
bindsym XF86AudioMute exec "pactl set-sink-mute 0 toggle"

# backlight
bindsym XF86MonBrightnessUp exec "xbacklight -inc 10"
bindsym XF86MonBrightnessDown exec "xbacklight -dec 10"

# pause music
bindsym $mod+p exec "mpc toggle"

# close notification
bindsym $mod+n exec dunstctl close

# reload configuration
bindsym $mod+Shift+c reload

# restart i3
bindsym $mod+Shift+r restart

# resize window
set $size 10

mode "resize" {
	bindsym h resize shrink width $size px 
	bindsym j resize grow height $size px 
	bindsym k resize shrink height $size px
	bindsym l resize grow width $size px

	# exit
	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

mode "kill" {
	bindsym Escape exec "killall xkill"
	bindsym $mod+Shift+q exec "killall xkill"
}
bindsym --release $mod+Shift+q exec "sh -c 'xkill; i3-msg mode default'"; mode kill

mode "snap" {
	bindsym Escape exec killall import
}
bindsym --release $mod+Shift+s exec "sh -c 'import png:- | xclip -sel clip -t image/png; i3-msg mode default'"; mode snap
